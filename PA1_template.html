<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Wayne Lewis" />


<title>Reproducibility Research Project 1</title>

<link rel="stylesheet" type="text/css" href="hwriter.css"></link>




</head>

<body>



<div id="header">
<h1 class="title">Reproducibility Research Project 1</h1>
<h4 class="author"><em>Wayne Lewis</em></h4>
</div>


<p>The metadata section of this R markdown file includes the title, author, and options for customizing output. The options define the characteristics for the PA1 template files generated when the RStudio “Knit HTML” button is clicked. The header.html file referenced in the metadata has one line of HTML code; the metadata header command adds this line of code to the header of the generated PA1_template.html file, which in turn forces the “hwriter.css” style sheet to be used; this style sheet enables more flexible formatting for tables generated in R.</p>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Peer Assessment 1 involves analysis and visualization of a personal movement activity monitoring data set.</p>
</div>
<div id="loading-and-preprocessing-the-data" class="section level2">
<h2>Loading and Preprocessing the Data</h2>
<p>First we load the data and convert the date column to POSIXct format. Note that some days, like October 8, 2012, have no recorded readings: all values for the “steps” variable are NA for this date.</p>
<pre class="r"><code>## install dplyr, hwriter, histogram, and ggplot2 packages
## cache=TRUE caches this code chunk for later reuse.

suppressMessages(library(dplyr))

u &lt;- read.csv(&quot;activity.csv&quot;)

## We change from the u$date factor variable to the v$Date POSIXct 
## vector. The capitalization of the date variable anticipates 
## the variable appearing as a table column header.

v &lt;- transform(u, Date = as.POSIXct(date))
v &lt;- select(v, steps, interval, Date)

head(v)</code></pre>
<pre><code>##   steps interval       Date
## 1    NA        0 2012-10-01
## 2    NA        5 2012-10-01
## 3    NA       10 2012-10-01
## 4    NA       15 2012-10-01
## 5    NA       20 2012-10-01
## 6    NA       25 2012-10-01</code></pre>
<pre class="r"><code>## We illustrate that the number of readings dated 2012-10-08
## is the same as the number of missing values dated 2012-10-08.

length(v[which(v$Date==&quot;2012-10-08&quot;), 1])</code></pre>
<pre><code>## [1] 288</code></pre>
<pre class="r"><code>length(v[which(v$Date==&quot;2012-10-08&quot;), 1][] == NA)</code></pre>
<pre><code>## [1] 288</code></pre>
</div>
<div id="what-is-mean-total-number-of-steps-taken-per-day" class="section level2">
<h2>What is mean total number of steps taken per day?</h2>
<p>Next, we display the total number of steps taken per day in a table.</p>
<pre class="r"><code>## The &quot;asis&quot; option above ensures that the table is rendered
## from the HTML code generated in this code block. The dplyr 
## summarize function is used to find the total number of 
## steps per day, and we capitalize the variable representing
## the result for the table.
##
## The hwriter package used below adds format options for HTML 
## output, especially as needed for tables. To see the code
## for the hwrite function, use hwriter:::showExample. Use 
## hwriter::showExample() to see sample output for hwrite.
## The cat command below is needed for the PA1_template.md file 
## to include the HTML code generated by the hwrite command (the 
## contents of test.html). Without the cat command, the test.html  
## file correctly renders the Date/Sum/Mean/Median table, but the
## table is not included in the knit2html output, PA1_template.html,
## of this R markdown file because, in this case, the 
## HTML code for the table is not in the PA1_template.md file. 
##
## Note that test.html does not call hwriter.css from its header 
## because the in_header command applied globally to this Rmd file
## (see top of this document) does not apply to test.html; 
## however, the table renders properly in test.html because the 
## file is generated by hwrite with the style attribute parameters.

suppressMessages(library(hwriter))

days &lt;- group_by(v, Date)

w &lt;- summarize(days, Steps = sum(steps))

cat(hwrite(w, &#39;test.html&#39;, center=TRUE, row.bgcolor=&#39;#ffdc98&#39;, row.style=list(&#39;font-weight:bold;text-align:center&#39;), col.style=list(Date=&#39;text-align:center&#39;, Steps=&#39;text-align:center&#39;, col.width=rep(&#39;30px&#39;, nrow(w))), width=&#39;300px&#39;))</code></pre>
<center>
<table width="300px" border="1">
<tr>
<td bgcolor="#ffdc98" style="font-weight:bold;text-align:center">
Date
</td>
<td bgcolor="#ffdc98" style="font-weight:bold;text-align:center">
Steps
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-01
</td>
<td style="text-align:center">
 
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-02
</td>
<td style="text-align:center">
126
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-03
</td>
<td style="text-align:center">
11352
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-04
</td>
<td style="text-align:center">
12116
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-05
</td>
<td style="text-align:center">
13294
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-06
</td>
<td style="text-align:center">
15420
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-07
</td>
<td style="text-align:center">
11015
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-08
</td>
<td style="text-align:center">
 
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-09
</td>
<td style="text-align:center">
12811
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-10
</td>
<td style="text-align:center">
9900
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-11
</td>
<td style="text-align:center">
10304
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-12
</td>
<td style="text-align:center">
17382
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-13
</td>
<td style="text-align:center">
12426
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-14
</td>
<td style="text-align:center">
15098
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-15
</td>
<td style="text-align:center">
10139
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-16
</td>
<td style="text-align:center">
15084
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-17
</td>
<td style="text-align:center">
13452
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-18
</td>
<td style="text-align:center">
10056
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-19
</td>
<td style="text-align:center">
11829
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-20
</td>
<td style="text-align:center">
10395
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-21
</td>
<td style="text-align:center">
8821
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-22
</td>
<td style="text-align:center">
13460
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-23
</td>
<td style="text-align:center">
8918
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-24
</td>
<td style="text-align:center">
8355
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-25
</td>
<td style="text-align:center">
2492
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-26
</td>
<td style="text-align:center">
6778
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-27
</td>
<td style="text-align:center">
10119
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-28
</td>
<td style="text-align:center">
11458
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-29
</td>
<td style="text-align:center">
5018
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-30
</td>
<td style="text-align:center">
9819
</td>
</tr>
<tr>
<td style="text-align:center">
2012-10-31
</td>
<td style="text-align:center">
15414
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-01
</td>
<td style="text-align:center">
 
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-02
</td>
<td style="text-align:center">
10600
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-03
</td>
<td style="text-align:center">
10571
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-04
</td>
<td style="text-align:center">
 
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-05
</td>
<td style="text-align:center">
10439
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-06
</td>
<td style="text-align:center">
8334
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-07
</td>
<td style="text-align:center">
12883
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-08
</td>
<td style="text-align:center">
3219
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-09
</td>
<td style="text-align:center">
 
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-10
</td>
<td style="text-align:center">
 
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-11
</td>
<td style="text-align:center">
12608
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-12
</td>
<td style="text-align:center">
10765
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-13
</td>
<td style="text-align:center">
7336
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-14
</td>
<td style="text-align:center">
 
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-15
</td>
<td style="text-align:center">
41
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-16
</td>
<td style="text-align:center">
5441
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-17
</td>
<td style="text-align:center">
14339
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-18
</td>
<td style="text-align:center">
15110
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-19
</td>
<td style="text-align:center">
8841
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-20
</td>
<td style="text-align:center">
4472
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-21
</td>
<td style="text-align:center">
12787
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-22
</td>
<td style="text-align:center">
20427
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-23
</td>
<td style="text-align:center">
21194
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-24
</td>
<td style="text-align:center">
14478
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-25
</td>
<td style="text-align:center">
11834
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-26
</td>
<td style="text-align:center">
11162
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-27
</td>
<td style="text-align:center">
13646
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-28
</td>
<td style="text-align:center">
10183
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-29
</td>
<td style="text-align:center">
7047
</td>
</tr>
<tr>
<td style="text-align:center">
2012-11-30
</td>
<td style="text-align:center">
 
</td>
</tr>
</table>
</center>
<p>We illustrate the “density” of steps per day with a histogram.</p>
<pre class="r"><code>suppressMessages(library(histogram))

hist(w$Steps, col=&#39;blue&#39;, main=&quot;Histogram for Steps per Day&quot;, xlab=&quot;Steps per Day&quot;, ylab=&quot;Frequency&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/histogram-1.png" title="" alt="" style="display: block; margin: auto;" /></p>
<p>We display in a table the mean number of steps per day and the median number of steps per day.</p>
<pre class="r"><code>suppressMessages(library(dplyr))

## We use the dplyr mutate option to calculate Mean and Median per day,
## leaving out missing values in the computations.

x &lt;- mutate(w, Mean=mean(Steps,na.rm=T), Median=median(Steps,na.rm=T))

## We use the dplyr select option to remove the Date and Sum
## columns. 

y &lt;- select(x, Mean, Median)

## Since the Mean and Median are the same in each row of y, we focus
## only on the first row. 

z &lt;- y[1, ]

## Note the syntax used with the row.style attribute: a semicolon
## is used to separate multiple attributes. The center attribute 
## centers the table on the page.

cat(hwrite(z, &#39;test2.html&#39;, center=TRUE, row.bgcolor=&#39;#ffdc98&#39;, row.style=list(&#39;font-weight:bold;text-align:center&#39;), col.style=list(Mean=&#39;text-align:center&#39;, Median=&#39;text-align:center&#39;), width=&#39;500px&#39;))</code></pre>
<center>
<table width="500px" border="1">
<tr>
<td bgcolor="#ffdc98" style="font-weight:bold;text-align:center">
Mean
</td>
<td bgcolor="#ffdc98" style="font-weight:bold;text-align:center">
Median
</td>
</tr>
<tr>
<td style="text-align:center">
10766.1886792453
</td>
<td style="text-align:center">
10765
</td>
</tr>
</table>
</center>
<pre class="r"><code>## The save.image command below saves the current workspace to 
## the .RData file. If there is a need to accesss the variables 
## used in code blocks within the R markdown file, then we can use 
## the load(&quot;.RData&quot;) command to load the variables and their values 
## into the workspace.

save.image()</code></pre>
</div>
<div id="what-is-the-average-daily-activity-pattern" class="section level2">
<h2>What is the average daily activity pattern?</h2>
<p>Here we generate a time series plot with the 5-minute intervals on the x-axis and the average number of steps taken, averaged across all days, on the y-axis.</p>
<pre class="r"><code>## Between October 1 and November 30 there is a

m &lt;- as.Date(u$date[nrow(u)])-as.Date(u$date[1])
print(m)</code></pre>
<pre><code>## Time difference of 60 days</code></pre>
<pre class="r"><code>n &lt;- as.integer(m)

## So October/November days can be represented by adding 0,1,2,...,n to

as.Date(&quot;2012-10-01&quot;)</code></pre>
<pre><code>## [1] &quot;2012-10-01&quot;</code></pre>
<pre class="r"><code>## to get maximum number of 5-minute intervals in any given day:

y &lt;- vector(mode=&quot;integer&quot;,length=n+1)
for (i in 1:n+1) {y[i] &lt;- length(u[u$date==toString(as.Date(&quot;2012-10-01&quot;)+(i-1)),2])}
p &lt;- max(y)
print(p)</code></pre>
<pre><code>## [1] 288</code></pre>
<pre class="r"><code>## Now we group all the data in the data frame u according to
## the values appearing in the interval column. The number of
## distinct values for the interval variable is

length(unique(u$interval))</code></pre>
<pre><code>## [1] 288</code></pre>
<pre class="r"><code>## and for each of these distinct values there are n+1
## distinct observations corresponding to p unique
## interval codes:

for (j in 1:p) {z[j]=nrow(u[u$interval==unique(u$interval)[j],])}

## So for each date there are p interval codes, and altogether
## there are p*(n+1) observations in the data set.

## The average number of steps per interval code is given by

IntervalMean &lt;- vector(mode=&quot;numeric&quot;,length=p)

for (k in 1:p) {IntervalMean[k] &lt;- mean(u[u$interval==unique(u$interval)[k],]$steps,na.rm=T)}

## A time seies plot of the 5-minute interval (x-axis) and the average 
## number of steps taken averaged across all days (y-axis) is now produced.
## We first create a function which turns an integer vector into the index
## vector for the input vector.

f &lt;- function(x){for (i in 1:p) x[i] &lt;- i
     return(x)  }

plot(unique(u$interval), IntervalMean[f(unique(u$interval))],type=&quot;l&quot;, xlab=&quot;5-Minute Interval Codes&quot;,ylab=&quot;Average Number of Steps&quot;,main=&quot;Average Number of Steps per 5-Minute Interval Code&quot;) </code></pre>
<p><img src="PA1_template_files/figure-html/Time%20Series%20Plot-1.png" title="" alt="" style="display: block; margin: auto;" /></p>
<p>Here we determine the 5-minute interval which had the maximum average number of steps.</p>
<pre class="r"><code>## The maximum occurs at once with value max(IntervalMean).

which.max(IntervalMean)</code></pre>
<pre><code>## [1] 104</code></pre>
<pre class="r"><code>max(IntervalMean)</code></pre>
<pre><code>## [1] 206.1698</code></pre>
<pre class="r"><code>## The 5-minute inteval where the maximum occurs is found by
## looking at index which.max(IntervalMean) in u$interval:

u$interval[which.max(IntervalMean)]</code></pre>
<pre><code>## [1] 835</code></pre>
<pre class="r"><code>## We can verify our work by computing the mean of all
## step-counts associated with thsi interval:

mean(u$steps[u$interval == u$interval[which.max(IntervalMean)]], na.rm=T)</code></pre>
<pre><code>## [1] 206.1698</code></pre>
</div>
<div id="imputing-missing-values" class="section level2">
<h2>Imputing missing values</h2>
<pre class="r"><code>## Vector of indices where u$steps is &quot;NA&quot;:

t &lt;- is.na(u$steps)

## Number of missing values in data set:

sum(t)</code></pre>
<pre><code>## [1] 2304</code></pre>
</div>
<div id="are-there-differences-in-activity-patterns-between-weekdays-and-weekends" class="section level2">
<h2>Are there differences in activity patterns between weekdays and weekends?</h2>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
